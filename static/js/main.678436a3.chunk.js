(this["webpackJsonpstable-coin-frontend"]=this["webpackJsonpstable-coin-frontend"]||[]).push([[0],{112:function(e,t){var a=Object({NODE_ENV:"production",PUBLIC_URL:"/artcoin",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CONTRACT_NAME||"art.artcoin.testnet";e.exports=function(e){switch(e){case"production":case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:a,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"development":case"testnet":return{networkId:"default",nodeUrl:"https://rpc.testnet.near.org",contractName:a,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:a,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/artcoin",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:a};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:a,masterAccount:"test.near"};case"ci-betanet":return{networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:a,masterAccount:"test.near"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}},118:function(e,t,a){},120:function(e,t){},125:function(e,t,a){},130:function(e,t){},153:function(e,t){},155:function(e,t){},198:function(e,t,a){"use strict";a.r(t);var n=a(11),c=a.n(n),r=a(22),s=a(108),o=a(0),i=a(27),l=a.n(i),j=(a(118),a(9)),b=(a(119),a(202)),u=a(203),d=a(200),O=a(109),h=a(208),x=a(204),m=a(205),f=a(201),g=a(111),p=a(20),_=a(1),v=function(e){var t=e.currentUser,a=e.contract,n=e.signIn,c=e.signOut,r=e.ausdContract,s=Object(o.useState)("0"),i=Object(j.a)(s,2),l=i[0],b=i[1],u=Object(o.useState)("0"),v=Object(j.a)(u,2),w=v[0],S=v[1],N=Object(o.useState)("0"),C=Object(j.a)(N,2),U=C[0],T=C[1],A=Object(o.useState)("0"),y=Object(j.a)(A,2),k=y[0],E=y[1],I=Object(o.useState)("0"),R=Object(j.a)(I,2),D=R[0],B=R[1],L=Object(p.formatNearAmount)(t.balance,5),M=Object(o.useState)("1000"),G=Object(j.a)(M,2),P=G[0],F=G[1],H=Object(o.useState)("1000"),K=Object(j.a)(H,2),W=K[0],z=K[1];Object(o.useEffect)((function(){a.get_total_balance({owner_id:t.accountId}).then((function(e){return b(e)})),a.get_unstaked_balance({owner_id:t.accountId}).then((function(e){return T(e)})),a.get_staked_balance({account_id:t.accountId}).then((function(e){return S(e)})),a.get_price().then((function(e){return B(e)})),r.get_balance({owner_id:t.accountId}).then((function(e){return E(e)}))}));var Y=Object(o.useState)(""),V=Object(j.a)(Y,2),$=V[0],J=(V[1],Object(o.useState)("")),q=Object(j.a)(J,2),Q=q[0],X=q[1],Z=Object(o.useState)(""),ee=Object(j.a)(Z,2),te=ee[0],ae=ee[1],ne=function(e){e.preventDefault(),a.stake_and_mint({stake:P+"000000000000000000000000"})},ce=Object(o.useState)(!1),re=Object(j.a)(ce,2),se=re[0],oe=re[1];return Object(_.jsxs)("div",{className:"art-card",children:[Object(_.jsxs)(d.a,{noGutters:!0,className:"p-2 mb-2",style:{background:"#fff"},children:[Object(_.jsxs)(O.a,{children:["NEAR Wallet : ",t.accountId," "]}),Object(_.jsxs)(O.a,{children:["NEAR Balance: ",L," \u24c3"]}),Object(_.jsx)(O.a,{style:{textAlign:"end"},children:t?Object(_.jsx)("button",{onClick:c,children:"Log Out"}):Object(_.jsx)("button",{onClick:n,children:"Log In"})})]}),void 0!==t?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(d.a,{noGutters:!0,className:"p-2 mb-2",children:[Object(_.jsxs)(O.a,{children:["ART Unstaked Balace: ",Object(p.formatNearAmount)(U,5)," \u24d0 ",Object(_.jsx)("br",{}),"ART Staked Balace: ",Object(p.formatNearAmount)(w,5)," \u24d0"]}),Object(_.jsxs)(O.a,{children:["ART Total Balace: ",Object(p.formatNearAmount)(l,5)," \u24d0"]})]}),Object(_.jsxs)(d.a,{noGutters:!0,className:"p-2 mb-2",children:[Object(_.jsx)(O.a,{children:Object(_.jsx)(h.a,{variant:"primary",onClick:function(){console.log("buy art with near"),a.buy_art_with_near({},3e14,$)},children:"Buy ART with NEAR token"})}),Object(_.jsxs)(O.a,{children:[Object(_.jsx)(h.a,{variant:"primary",onClick:function(){return oe(!0)},children:"Transfer"}),Object(_.jsxs)(x.a,{show:se,onHide:function(){return oe(!1)},children:[Object(_.jsx)(x.a.Header,{closeButton:!0,children:Object(_.jsx)(x.a.Title,{children:"Transfer ART to your hoomie"})}),Object(_.jsx)(x.a.Body,{children:Object(_.jsxs)(m.a,{style:{width:"100%"},onSubmit:ne,children:[Object(_.jsxs)(m.a.Group,{controlId:"receiver",children:[Object(_.jsx)(m.a.Label,{children:"Receiver: "}),Object(_.jsx)(f.a,{className:"mb-2",children:Object(_.jsx)(g.a,{value:Q,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";X(t)}}})})]}),Object(_.jsxs)(m.a.Group,{controlId:"sendamount",children:[Object(_.jsx)(m.a.Label,{children:"Send Amount "}),Object(_.jsx)(f.a,{className:"mb-2",children:Object(_.jsx)(g.a,{value:te,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";ae(t)}}})})]}),Object(_.jsx)(h.a,{type:"submit",onClick:function(){console.log("transfer"),a.transfer({new_owner_id:Q,amount:te+"000000000000000000000000"})},children:"Confirm Transfer"})]})}),Object(_.jsx)(x.a.Footer,{children:Object(_.jsx)(h.a,{onClick:function(){return oe(!1)},children:"Close"})})]})]})]}),Object(_.jsxs)(d.a,{noGutters:!0,className:"p-2 mb-2",style:{background:"#fff"},children:[Object(_.jsxs)(O.a,{children:["ART Price: ",(Number(D)/Math.pow(10,8)).toFixed(2)," $"]}),Object(_.jsxs)(O.a,{children:["AUSD Balance: ",Object(p.formatNearAmount)(k,5)," $"]})]}),Object(_.jsx)(d.a,{noGutters:!0,className:"p-2 mb-2",children:Object(_.jsx)(m.a,{style:{width:"100%"},onSubmit:ne,children:Object(_.jsxs)(m.a.Row,{className:"align-items-center",children:[Object(_.jsx)(O.a,{className:"mx-1",children:Object(_.jsxs)(f.a,{children:[Object(_.jsx)(f.a.Prepend,{children:Object(_.jsx)(f.a.Text,{children:"Amount"})}),Object(_.jsx)(g.a,{value:P,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";F(t)}}})]})}),Object(_.jsx)(O.a,{className:"mx-1",style:{textAlign:"end"},children:Object(_.jsx)(h.a,{type:"submit",children:"Stake & Mint"})})]})})}),Object(_.jsx)(d.a,{noGutters:!0,className:"p-2 mb-2",children:Object(_.jsx)(m.a,{style:{width:"100%"},onSubmit:function(e){e.preventDefault(),a.burn_to_unstake({unstake_amount:W+"000000000000000000000000"})},children:Object(_.jsxs)(m.a.Row,{className:"align-items-center",children:[Object(_.jsx)(O.a,{className:"mx-1",children:Object(_.jsxs)(f.a,{children:[Object(_.jsx)(f.a.Prepend,{children:Object(_.jsx)(f.a.Text,{children:"Amount"})}),Object(_.jsx)(g.a,{value:W,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";z(t)}}})]})}),Object(_.jsx)(O.a,{className:"mx-1",style:{textAlign:"end"},children:Object(_.jsx)(h.a,{type:"submit",children:"Burn to Unstake"})})]})})})]}):Object(_.jsx)(d.a,{noGutters:!0,className:"p-5",children:"Welcome to ART Wallet, please login with your near account to start"})]})},w=a(43),S=a(206),N=a(207),C=3e14,U=function(e){var t=e.contract,a=e.accountId,n=Object(o.useState)({aNEAR:"0",aBTC:"0",aGOLD:"0",aSPY:"0",aEUR:"0"}),c=Object(j.a)(n,2),s=c[0],i=c[1],l=Object(o.useState)({aNEAR:"0",aBTC:"0",aGOLD:"0",aSPY:"0",aEUR:"0"}),b=Object(j.a)(l,2),u=b[0],x=b[1],v=Object(o.useState)("aBTC"),U=Object(j.a)(v,2),T=U[0],A=U[1];Object(o.useEffect)((function(){t.get_asset_price({asset:"aBTC"}).then((function(e){i(Object(r.a)(Object(r.a)({},s),{},{aBTC:e}))})),t.get_asset_balance({account_id:a,asset:"aBTC"}).then((function(e){return x(Object(r.a)(Object(r.a)({},u),{},{aBTC:e}))}))}),[]);var y=Object.entries(u).map((function(e){var t=Object(j.a)(e,2),a=t[0];t[1];return Object(_.jsx)("option",{children:a},a)})),k=Object(o.useState)({asset:"0",aUSD:"0"}),E=Object(j.a)(k,2),I=E[0],R=E[1],D=Object(o.useState)({asset:"0",aUSD:"0"}),B=Object(j.a)(D,2),L=B[0],M=B[1];return Object(_.jsxs)("div",{className:"trade-card",children:[Object(_.jsxs)(d.a,{noGutters:!0,className:"p-2",style:{background:"#fff"},children:[Object(_.jsx)(O.a,{children:"BUY/SELL"}),Object(_.jsx)(O.a,{children:Object(_.jsx)(m.a.Group,{controlId:"formSelect",children:Object(_.jsx)(m.a.Control,{value:T,as:"select",onChange:function(e){if(e){var n=null!==e.target?e.target.value:"";A(n),t.get_asset_price({asset:n}).then((function(e){i(Object(r.a)(Object(r.a)({},s),{},Object(w.a)({},n,e)))})),t.get_asset_balance({account_id:a,asset:n}).then((function(e){return x(Object(r.a)(Object(r.a)({},u),{},Object(w.a)({},n,e)))}))}},children:y})})})]}),Object(_.jsxs)(S.a,{children:[Object(_.jsxs)(N.a,{children:[Object(_.jsx)(N.a.Header,{children:Object(_.jsx)(S.a.Toggle,{as:N.a.Header,eventKey:"0",children:"BUY"})}),Object(_.jsx)(S.a.Collapse,{eventKey:"0",children:Object(_.jsx)(N.a.Body,{children:Object(_.jsxs)(m.a,{onSubmit:function(e){e.preventDefault();var a=(Number(I.asset)*Math.pow(10,24)).toLocaleString("fullwide",{useGrouping:!1});t.buy_asset_with_ausd({asset:T,asset_amount:a},C)},style:{width:"100%"},children:[Object(_.jsxs)(m.a.Group,{controlId:"buyAsset",children:[Object(_.jsxs)(m.a.Label,{children:["BUY ",T,": "]}),Object(_.jsxs)(f.a,{className:"mb-2",children:[Object(_.jsx)(f.a.Prepend,{children:Object(_.jsx)(f.a.Text,{children:T})}),Object(_.jsx)(g.a,{value:I.asset,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";R({asset:t,aUSD:Number(t)*Number(s[T])/Math.pow(10,8)})}}})]})]}),Object(_.jsxs)(m.a.Group,{controlId:"fromausd",children:[Object(_.jsx)(m.a.Label,{children:"with aUSD: "}),Object(_.jsxs)(f.a,{className:"mb-2",children:[Object(_.jsx)(f.a.Prepend,{children:Object(_.jsx)(f.a.Text,{children:"aUSD"})}),Object(_.jsx)(g.a,{value:I.aUSD,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";R({asset:Number(t)/(Number(s[T])/Math.pow(10,8)),aUSD:t})}}})]})]}),Object(_.jsxs)(d.a,{style:{fontSize:"12px"},children:[Object(_.jsxs)(O.a,{children:["Balace: ",Object(p.formatNearAmount)(u[T],5)]}),Object(_.jsxs)(O.a,{children:["Price: 1 ",T," = ",(Number(s[T])/Math.pow(10,8)).toFixed(4)," aUSD"]}),Object(_.jsxs)(O.a,{children:["USD VALUE: $",(Number(I.asset)*Number(s[T])/Math.pow(10,8)).toFixed(4)]})]}),Object(_.jsx)(h.a,{variant:"primary",type:"submit",children:"CONFIRM TRADE"})]})})})]}),Object(_.jsxs)(N.a,{children:[Object(_.jsx)(N.a.Header,{children:Object(_.jsx)(S.a.Toggle,{as:N.a.Header,eventKey:"1",children:"SELL"})}),Object(_.jsx)(S.a.Collapse,{eventKey:"1",children:Object(_.jsx)(N.a.Body,{children:Object(_.jsxs)(m.a,{onSubmit:function(e){e.preventDefault();var a=(Number(L.asset)*Math.pow(10,24)).toLocaleString("fullwide",{useGrouping:!1});t.sell_asset_to_ausd({asset:T,asset_amount:a},C)},style:{width:"100%"},children:[Object(_.jsxs)(m.a.Group,{controlId:"sellAsset",children:[Object(_.jsxs)(m.a.Label,{children:["SELL ",T,": "]}),Object(_.jsxs)(f.a,{className:"mb-2",children:[Object(_.jsx)(f.a.Prepend,{children:Object(_.jsx)(f.a.Text,{children:T})}),Object(_.jsx)(g.a,{value:L.asset,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";M({asset:t,aUSD:Number(t)*Number(s[T])/Math.pow(10,8)})}}})]})]}),Object(_.jsxs)(m.a.Group,{controlId:"toausd",children:[Object(_.jsx)(m.a.Label,{children:"to aUSD: "}),Object(_.jsxs)(f.a,{className:"mb-2",children:[Object(_.jsx)(f.a.Prepend,{children:Object(_.jsx)(f.a.Text,{children:"aUSD"})}),Object(_.jsx)(g.a,{value:L.aUSD,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";M({asset:Number(t)/(Number(s[T])/Math.pow(10,8)),aUSD:t})}}})]})]}),Object(_.jsxs)(d.a,{style:{fontSize:"12px"},children:[Object(_.jsxs)(O.a,{children:["Balace: ",Object(p.formatNearAmount)(u[T],5)]}),Object(_.jsxs)(O.a,{children:["Price: 1 ",T," = ",(Number(s[T])/Math.pow(10,8)).toFixed(4)," aUSD"]}),Object(_.jsxs)(O.a,{children:["USD VALUE: $",(Number(L.asset)*Number(s[T])/Math.pow(10,8)).toFixed(4)]})]}),Object(_.jsx)(h.a,{variant:"primary",type:"submit",children:"CONFIRM TRADE"})]})})})]})]})]})},T=(a(125),function(e){var t=e.contract,a=e.currentUser,n=e.nearConfig,c=e.wallet,r=e.ausdContract,s=Object(o.useState)(!1),i=Object(j.a)(s,2),l=i[0],d=i[1],O=Object(o.useCallback)((function(){c.requestSignIn(n.contractName,"NEAR ART Coin")}),[c,n]),h=Object(o.useCallback)((function(){c.signOut(),setTimeout(d(!0),5e3),window.location="/",d(!1)}),[c]);return l?Object(_.jsxs)(b.a,{children:[Object(_.jsx)("header",{children:"ART Coin Exchange"}),Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{animation:"border",size:"sm",variant:"warning"}),Object(_.jsx)(u.a,{animation:"border",size:"sm",variant:"warning"}),Object(_.jsx)(u.a,{animation:"border",size:"sm",variant:"warning"}),Object(_.jsx)(u.a,{animation:"border",variant:"warning"}),Object(_.jsx)(u.a,{animation:"border",variant:"warning"}),Object(_.jsx)(u.a,{animation:"border",variant:"warning"})]})]}):Object(_.jsxs)(b.a,{children:[Object(_.jsx)("header",{children:"ART Coin Exchange"}),Object(_.jsx)(v,{ausdContract:r,currentUser:a,contract:t,signIn:O,signOut:h}),Object(_.jsx)("hr",{}),a&&Object(_.jsx)(U,{contract:t,accountId:a.accountId})]})}),A=a(37),y=a(112),k=a.n(y);function E(){return(E=Object(s.a)(c.a.mark((function e(){var t,a,n,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k()("production"),e.next=3,A.connect(Object(r.a)({deps:{keyStore:new A.keyStores.BrowserLocalStorageKeyStore}},t));case 3:if(a=e.sent,!(n=new A.WalletConnection(a)).getAccountId()){e.next=11;break}return e.t0=n.getAccountId(),e.next=9,n.account().state();case 9:e.t1=e.sent.amount,s={accountId:e.t0,balance:e.t1};case 11:return e.next=13,new A.Contract(n.account(),t.contractName,{viewMethods:["get_total_balance","get_unstaked_balance","get_staked_balance","get_price","get_asset_price","get_asset_balance"],changeMethods:["stake_and_mint","burn_to_unstake","get_some_art","buy_asset_with_ausd","sell_asset_to_ausd","transfer","buy_art_with_near"],sender:n.getAccountId()});case 13:return o=e.sent,e.next=16,new A.Contract(n.account(),"ausd.artcoin.testnet",{viewMethods:["get_balance"],changeMethods:[],sender:n.getAccountId()});case 16:return i=e.sent,e.abrupt("return",{contract:o,currentUser:s,nearConfig:t,walletConnection:n,ausdContract:i});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.nearInitPromise=function(){return E.apply(this,arguments)}().then((function(e){var t=e.contract,a=e.currentUser,n=e.nearConfig,c=e.walletConnection,r=e.ausdContract;l.a.render(Object(_.jsx)(T,{ausdContract:r,contract:t,currentUser:a,nearConfig:n,wallet:c}),document.getElementById("root"))}))}},[[198,1,2]]]);
//# sourceMappingURL=main.678436a3.chunk.js.map