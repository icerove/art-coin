(this["webpackJsonpstable-coin-frontend"]=this["webpackJsonpstable-coin-frontend"]||[]).push([[0],{106:function(e,t){var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CONTRACT_NAME||"art.artcoin.testnet";e.exports=function(e){switch(e){case"production":case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:a,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"development":case"testnet":return{networkId:"default",nodeUrl:"https://rpc.testnet.near.org",contractName:a,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:a,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:a};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:a,masterAccount:"test.near"};case"ci-betanet":return{networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:a,masterAccount:"test.near"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}},112:function(e,t,a){},114:function(e,t){},119:function(e,t,a){},124:function(e,t){},146:function(e,t){},148:function(e,t){},181:function(e,t,a){"use strict";a.r(t);var n=a(11),c=a.n(n),r=a(23),s=a(102),o=a(0),i=a(29),l=a.n(i),j=(a(112),a(7)),b=(a(113),a(185)),u=a(186),d=a(183),O=a(103),h=a(187),x=a(188),m=a(184),g=a(105),f=a(191),p=a(21),_=a(19),w=a.n(_),v=a(1),S=3e14,N=new w.a("1000000000000000000000000"),C=function(e){var t=e.currentUser,a=e.contract,n=(e.signIn,e.signOut),c=e.ausdContract,r=Object(o.useState)("0"),s=Object(j.a)(r,2),i=s[0],l=s[1],b=Object(o.useState)("0"),u=Object(j.a)(b,2),_=u[0],C=u[1],A=Object(o.useState)("0"),T=Object(j.a)(A,2),y=T[0],U=T[1],R=Object(o.useState)("0"),k=Object(j.a)(R,2),E=k[0],D=k[1],I=Object(o.useState)("0"),B=Object(j.a)(I,2),L=B[0],G=B[1],M=Object(p.formatNearAmount)(t.balance,5),P=Object(o.useState)("0"),F=Object(j.a)(P,2),H=F[0],K=F[1];Object(o.useEffect)((function(){a.get_total_balance({owner_id:t.accountId}).then((function(e){return l(e)})),a.get_unstaked_balance({owner_id:t.accountId}).then((function(e){return U(e)})),a.get_staked_balance({account_id:t.accountId}).then((function(e){return C(e)})),a.get_price().then((function(e){return G(e)})),c.get_balance({owner_id:t.accountId}).then((function(e){return D(e)})),a.get_asset_price({asset:"aNEAR"}).then((function(e){K(e)}))})),console.log(a);var W=Object(o.useState)("10"),$=Object(j.a)(W,2),z=$[0],Y=$[1],V=Object(o.useState)(""),J=Object(j.a)(V,2),q=J[0],Q=J[1],X=Object(o.useState)(""),Z=Object(j.a)(X,2),ee=Z[0],te=Z[1],ae=Object(o.useState)("1000"),ne=Object(j.a)(ae,2),ce=ne[0],re=ne[1],se=Object(o.useState)("1000"),oe=Object(j.a)(se,2),ie=oe[0],le=oe[1],je=Object(o.useState)(!1),be=Object(j.a)(je,2),ue=be[0],de=be[1];return Object(v.jsxs)("div",{className:"art-card",children:[Object(v.jsxs)(d.a,{noGutters:!0,className:"p-2 mb-2",style:{background:"#fff"},children:[Object(v.jsxs)(O.a,{children:["NEAR Wallet : ",t.accountId," "]}),Object(v.jsxs)(O.a,{children:["NEAR Balance: ",M," \u24c3"]}),Object(v.jsx)(O.a,{style:{textAlign:"end"},children:t&&Object(v.jsx)("button",{onClick:n,children:"Log Out"})})]}),void 0!==t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(d.a,{noGutters:!0,style:{fontSize:"12px"},className:"p-2 mb-2",children:"After staking every $5 value of ART, you will mint 1 aUSD. In reverse, after burning 1 aUSD, you will get $5 value of ART back."}),Object(v.jsxs)(d.a,{noGutters:!0,className:"p-2 mb-2",style:{background:"#fff"},children:[Object(v.jsxs)(O.a,{children:["ART Price: ",(Number(L)/Math.pow(10,8)).toFixed(2)," $"]}),Object(v.jsxs)(O.a,{children:["NEAR Price: ",(Number(H)/Math.pow(10,8)).toFixed(2)," $"]})]}),Object(v.jsxs)(d.a,{noGutters:!0,className:"p-2 mb-2",children:[Object(v.jsxs)(O.a,{children:["ART Unstaked Balace: ",Object(p.formatNearAmount)(y,5)," \u24d0"]}),Object(v.jsxs)(O.a,{children:["ART Total Balace: ",Object(p.formatNearAmount)(i,5)," \u24d0 "," ",Object(v.jsx)("button",{onClick:function(){return de(!0)},children:"Transfer"}),Object(v.jsxs)(h.a,{show:ue,onHide:function(){return de(!1)},children:[Object(v.jsx)(h.a.Header,{closeButton:!0,children:Object(v.jsx)(h.a.Title,{children:"Transfer ART to your hoomie"})}),Object(v.jsx)(h.a.Body,{children:Object(v.jsxs)(x.a,{style:{width:"100%"},onSubmit:function(e){e.preventDefault(),a.transfer({new_owner_id:q,amount:ee+"000000000000000000000000"},S)},children:[Object(v.jsxs)(x.a.Group,{controlId:"receiver",children:[Object(v.jsx)(x.a.Label,{children:"Receiver: "}),Object(v.jsx)(m.a,{className:"mb-2",children:Object(v.jsx)(g.a,{value:q,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";Q(t)}}})})]}),Object(v.jsxs)(x.a.Group,{controlId:"sendamount",children:[Object(v.jsx)(x.a.Label,{children:"Send Amount: "}),Object(v.jsx)(m.a,{className:"mb-2",children:Object(v.jsx)(g.a,{value:ee,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";te(t)}}})})]}),Object(v.jsx)(f.a,{type:"submit",children:"Confirm Transfer"})]})}),Object(v.jsx)(h.a.Footer,{children:Object(v.jsx)(f.a,{onClick:function(){return de(!1)},children:"Close"})})]})]})]}),Object(v.jsx)(d.a,{noGutters:!0,className:"p-2 mb-2",children:Object(v.jsx)(O.a,{children:Object(v.jsx)(x.a,{style:{width:"100%"},onSubmit:function(e){e.preventDefault();var t=new w.a(z).mul(new w.a(L)).mul(N).div(new w.a(H));a.buy_art_with_near({},S,t.toString())},children:Object(v.jsxs)(x.a.Row,{className:"align-items-center",children:[Object(v.jsx)(O.a,{className:"mx-1",children:Object(v.jsxs)(m.a,{children:[Object(v.jsx)(m.a.Prepend,{children:Object(v.jsx)(m.a.Text,{children:"ART Amount"})}),Object(v.jsx)(g.a,{value:z,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";Y(t)}}})]})}),Object(v.jsx)(O.a,{className:"mx-1",style:{textAlign:"end"},children:Object(v.jsx)(f.a,{type:"submit",children:"Buy ART with NEAR token"})})]})})})}),Object(v.jsxs)(d.a,{noGutters:!0,className:"p-2 mb-2",style:{background:"#fff"},children:[Object(v.jsxs)(O.a,{children:["AUSD Balance: ",Object(p.formatNearAmount)(E,5)," $"]}),Object(v.jsxs)(O.a,{children:["ART Staked Balace: ",Object(p.formatNearAmount)(_,5)," \u24d0"]})]}),Object(v.jsx)(d.a,{noGutters:!0,className:"p-2 mb-2",children:Object(v.jsx)(x.a,{style:{width:"100%"},onSubmit:function(e){e.preventDefault(),a.stake_and_mint({stake:ce+"000000000000000000000000"})},children:Object(v.jsxs)(x.a.Row,{className:"align-items-center",children:[Object(v.jsx)(O.a,{className:"mx-1",children:Object(v.jsxs)(m.a,{children:[Object(v.jsx)(m.a.Prepend,{children:Object(v.jsx)(m.a.Text,{children:"Amount"})}),Object(v.jsx)(g.a,{value:ce,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";re(t)}}})]})}),Object(v.jsx)(O.a,{className:"mx-1",style:{textAlign:"end"},children:Object(v.jsx)(f.a,{type:"submit",children:"Stake & Mint"})})]})})}),Object(v.jsx)(d.a,{noGutters:!0,className:"p-2 mb-2",children:Object(v.jsx)(x.a,{style:{width:"100%"},onSubmit:function(e){e.preventDefault(),a.burn_to_unstake({unstake_amount:ie+"000000000000000000000000"})},children:Object(v.jsxs)(x.a.Row,{className:"align-items-center",children:[Object(v.jsx)(O.a,{className:"mx-1",children:Object(v.jsxs)(m.a,{children:[Object(v.jsx)(m.a.Prepend,{children:Object(v.jsx)(m.a.Text,{children:"Amount"})}),Object(v.jsx)(g.a,{value:ie,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";le(t)}}})]})}),Object(v.jsx)(O.a,{className:"mx-1",style:{textAlign:"end"},children:Object(v.jsx)(f.a,{type:"submit",children:"Burn to Unstake"})})]})})})]}):Object(v.jsx)(d.a,{noGutters:!0,className:"p-5",children:"Welcome to ART Wallet, please login with your near account to start"})]})},A=a(42),T=a(189),y=a(190),U=3e14,R=function(e){var t=e.contract,a=e.accountId,n=Object(o.useState)({aNEAR:"0",aBTC:"0",aGOLD:"0",aSPY:"0",aEUR:"0"}),c=Object(j.a)(n,2),s=c[0],i=c[1],l=Object(o.useState)({aNEAR:"0",aBTC:"0",aGOLD:"0",aSPY:"0",aEUR:"0"}),b=Object(j.a)(l,2),u=b[0],h=b[1],_=Object(o.useState)("aBTC"),w=Object(j.a)(_,2),S=w[0],N=w[1];Object(o.useEffect)((function(){t.get_asset_price({asset:"aBTC"}).then((function(e){i(Object(r.a)(Object(r.a)({},s),{},{aBTC:e}))})),t.get_asset_balance({account_id:a,asset:"aBTC"}).then((function(e){return h(Object(r.a)(Object(r.a)({},u),{},{aBTC:e}))}))}),[]);var C=Object.entries(u).map((function(e){var t=Object(j.a)(e,2),a=t[0];t[1];return Object(v.jsx)("option",{children:a},a)})),R=Object(o.useState)({asset:"0",aUSD:"0"}),k=Object(j.a)(R,2),E=k[0],D=k[1],I=Object(o.useState)({asset:"0",aUSD:"0"}),B=Object(j.a)(I,2),L=B[0],G=B[1];return Object(v.jsxs)("div",{className:"trade-card",children:[Object(v.jsxs)(d.a,{noGutters:!0,className:"p-2",style:{background:"#fff"},children:[Object(v.jsx)(O.a,{children:"BUY/SELL"}),Object(v.jsx)(O.a,{children:Object(v.jsx)(x.a.Group,{controlId:"formSelect",children:Object(v.jsx)(x.a.Control,{value:S,as:"select",onChange:function(e){if(e){var n=null!==e.target?e.target.value:"";N(n),t.get_asset_price({asset:n}).then((function(e){i(Object(r.a)(Object(r.a)({},s),{},Object(A.a)({},n,e)))})),t.get_asset_balance({account_id:a,asset:n}).then((function(e){return h(Object(r.a)(Object(r.a)({},u),{},Object(A.a)({},n,e)))}))}},children:C})})})]}),Object(v.jsxs)(T.a,{children:[Object(v.jsxs)(y.a,{children:[Object(v.jsx)(y.a.Header,{children:Object(v.jsx)(T.a.Toggle,{as:y.a.Header,eventKey:"0",children:"BUY"})}),Object(v.jsx)(T.a.Collapse,{eventKey:"0",children:Object(v.jsx)(y.a.Body,{children:Object(v.jsxs)(x.a,{onSubmit:function(e){e.preventDefault();var a=(Number(E.asset)*Math.pow(10,24)).toLocaleString("fullwide",{useGrouping:!1});t.buy_asset_with_ausd({asset:S,asset_amount:a},U)},style:{width:"100%"},children:[Object(v.jsxs)(x.a.Group,{controlId:"buyAsset",children:[Object(v.jsxs)(x.a.Label,{children:["BUY ",S,": "]}),Object(v.jsxs)(m.a,{className:"mb-2",children:[Object(v.jsx)(m.a.Prepend,{children:Object(v.jsx)(m.a.Text,{children:S})}),Object(v.jsx)(g.a,{value:E.asset,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";D({asset:t,aUSD:Number(t)*Number(s[S])/Math.pow(10,8)})}}})]})]}),Object(v.jsxs)(x.a.Group,{controlId:"fromausd",children:[Object(v.jsx)(x.a.Label,{children:"with aUSD: "}),Object(v.jsxs)(m.a,{className:"mb-2",children:[Object(v.jsx)(m.a.Prepend,{children:Object(v.jsx)(m.a.Text,{children:"aUSD"})}),Object(v.jsx)(g.a,{value:E.aUSD,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";D({asset:Number(t)/(Number(s[S])/Math.pow(10,8)),aUSD:t})}}})]})]}),Object(v.jsxs)(d.a,{style:{fontSize:"12px"},children:[Object(v.jsxs)(O.a,{children:["Balace: ",Object(p.formatNearAmount)(u[S],5)]}),Object(v.jsxs)(O.a,{children:["Price: 1 ",S," = ",(Number(s[S])/Math.pow(10,8)).toFixed(4)," aUSD"]}),Object(v.jsxs)(O.a,{children:["USD VALUE: $",(Number(E.asset)*Number(s[S])/Math.pow(10,8)).toFixed(4)]})]}),Object(v.jsx)(f.a,{variant:"primary",type:"submit",children:"CONFIRM TRADE"})]})})})]}),Object(v.jsxs)(y.a,{children:[Object(v.jsx)(y.a.Header,{children:Object(v.jsx)(T.a.Toggle,{as:y.a.Header,eventKey:"1",children:"SELL"})}),Object(v.jsx)(T.a.Collapse,{eventKey:"1",children:Object(v.jsx)(y.a.Body,{children:Object(v.jsxs)(x.a,{onSubmit:function(e){e.preventDefault();var a=(Number(L.asset)*Math.pow(10,24)).toLocaleString("fullwide",{useGrouping:!1});t.sell_asset_to_ausd({asset:S,asset_amount:a},U)},style:{width:"100%"},children:[Object(v.jsxs)(x.a.Group,{controlId:"sellAsset",children:[Object(v.jsxs)(x.a.Label,{children:["SELL ",S,": "]}),Object(v.jsxs)(m.a,{className:"mb-2",children:[Object(v.jsx)(m.a.Prepend,{children:Object(v.jsx)(m.a.Text,{children:S})}),Object(v.jsx)(g.a,{value:L.asset,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";G({asset:t,aUSD:Number(t)*Number(s[S])/Math.pow(10,8)})}}})]})]}),Object(v.jsxs)(x.a.Group,{controlId:"toausd",children:[Object(v.jsx)(x.a.Label,{children:"to aUSD: "}),Object(v.jsxs)(m.a,{className:"mb-2",children:[Object(v.jsx)(m.a.Prepend,{children:Object(v.jsx)(m.a.Text,{children:"aUSD"})}),Object(v.jsx)(g.a,{value:L.aUSD,onChange:function(e){if(e){var t=null!==e.target?e.target.value:"";G({asset:Number(t)/(Number(s[S])/Math.pow(10,8)),aUSD:t})}}})]})]}),Object(v.jsxs)(d.a,{style:{fontSize:"12px"},children:[Object(v.jsxs)(O.a,{children:["Balace: ",Object(p.formatNearAmount)(u[S],5)]}),Object(v.jsxs)(O.a,{children:["Price: 1 ",S," = ",(Number(s[S])/Math.pow(10,8)).toFixed(4)," aUSD"]}),Object(v.jsxs)(O.a,{children:["USD VALUE: $",(Number(L.asset)*Number(s[S])/Math.pow(10,8)).toFixed(4)]})]}),Object(v.jsx)(f.a,{variant:"primary",type:"submit",children:"CONFIRM TRADE"})]})})})]})]})]})},k=(a(119),function(e){var t=e.contract,a=e.currentUser,n=e.nearConfig,c=e.wallet,r=e.ausdContract,s=Object(o.useState)(!1),i=Object(j.a)(s,2),l=i[0],O=i[1],h=Object(o.useCallback)((function(){c.requestSignIn(n.contractName,"NEAR ART Coin")}),[c,n]),x=Object(o.useCallback)((function(){c.signOut(),setTimeout(O(!0),5e3),window.location="/",O(!1)}),[c]);return l?Object(v.jsxs)(b.a,{children:[Object(v.jsx)("header",{children:"ART Coin Exchange"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(u.a,{animation:"border",size:"sm",variant:"warning"}),Object(v.jsx)(u.a,{animation:"border",size:"sm",variant:"warning"}),Object(v.jsx)(u.a,{animation:"border",size:"sm",variant:"warning"}),Object(v.jsx)(u.a,{animation:"border",variant:"warning"}),Object(v.jsx)(u.a,{animation:"border",variant:"warning"}),Object(v.jsx)(u.a,{animation:"border",variant:"warning"})]})]}):a?Object(v.jsxs)(b.a,{children:[Object(v.jsx)("header",{children:"ART Coin Exchange"}),Object(v.jsx)(C,{ausdContract:r,currentUser:a,contract:t,signIn:h,signOut:x}),Object(v.jsx)("hr",{}),Object(v.jsx)(R,{contract:t,accountId:a.accountId})]}):Object(v.jsxs)(b.a,{children:[Object(v.jsx)("header",{children:"ART Coin Exchange"}),Object(v.jsx)(d.a,{noGutters:!0,style:{height:"50px"},children:"Welcome to ART coin, please log in with NEAR wallet to start journey!"}),Object(v.jsx)("button",{onClick:h,children:"Log In"})]})}),E=a(32),D=a(106),I=a.n(D);function B(){return(B=Object(s.a)(c.a.mark((function e(){var t,a,n,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I()("production"),window.near=E,e.next=4,E.connect(Object(r.a)({deps:{keyStore:new E.keyStores.BrowserLocalStorageKeyStore}},t));case 4:if(a=e.sent,!(n=new E.WalletConnection(a)).getAccountId()){e.next=12;break}return e.t0=n.getAccountId(),e.next=10,n.account().state();case 10:e.t1=e.sent.amount,s={accountId:e.t0,balance:e.t1};case 12:return e.next=14,new E.Contract(n.account(),t.contractName,{viewMethods:["get_total_balance","get_unstaked_balance","get_staked_balance","get_price","get_asset_price","get_asset_balance"],changeMethods:["stake_and_mint","burn_to_unstake","get_some_art","buy_asset_with_ausd","sell_asset_to_ausd","transfer","buy_art_with_near"],sender:n.getAccountId()});case 14:return o=e.sent,e.next=17,new E.Contract(n.account(),"ausd.artcoin.testnet",{viewMethods:["get_balance"],changeMethods:[],sender:n.getAccountId()});case 17:return i=e.sent,e.abrupt("return",{contract:o,currentUser:s,nearConfig:t,walletConnection:n,ausdContract:i});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.nearInitPromise=function(){return B.apply(this,arguments)}().then((function(e){var t=e.contract,a=e.currentUser,n=e.nearConfig,c=e.walletConnection,r=e.ausdContract;l.a.render(Object(v.jsx)(k,{ausdContract:r,contract:t,currentUser:a,nearConfig:n,wallet:c}),document.getElementById("root"))}))}},[[181,1,2]]]);
//# sourceMappingURL=main.a5c6a9de.chunk.js.map